{"ast":null,"code":"module.exports = {\n  rateLimiter\n};\n\nconst RateLimiter = require('limiter').RateLimiter;\n\nfunction rateLimiter(instance, requestsPerSecond) {\n  instance.limiter = new RateLimiter(requestsPerSecond, 'second');\n  instance.interceptors.request.use(function (request) {\n    return new Promise((resolve, reject) => {\n      instance.limiter.removeTokens(1, function (err, remainingRequests) {\n        if (err) return reject(err);\n        resolve(request);\n      });\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/sebas/Desktop/folders/Jobs/Elaastacloud/client/node_modules/bestbuy/lib/rate-limiter.js"],"names":["module","exports","rateLimiter","RateLimiter","require","instance","requestsPerSecond","limiter","interceptors","request","use","Promise","resolve","reject","removeTokens","err","remainingRequests"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB;AAAEC,EAAAA;AAAF,CAAjB;;AAEA,MAAMC,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAAvC;;AAEA,SAASD,WAAT,CAAsBG,QAAtB,EAAgCC,iBAAhC,EAAmD;AACjDD,EAAAA,QAAQ,CAACE,OAAT,GAAmB,IAAIJ,WAAJ,CAAgBG,iBAAhB,EAAmC,QAAnC,CAAnB;AAEAD,EAAAA,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAUD,OAAV,EAAmB;AACnD,WAAO,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCR,MAAAA,QAAQ,CAACE,OAAT,CAAiBO,YAAjB,CAA8B,CAA9B,EAAiC,UAAUC,GAAV,EAAeC,iBAAf,EAAkC;AACjE,YAAID,GAAJ,EAAS,OAAOF,MAAM,CAACE,GAAD,CAAb;AACTH,QAAAA,OAAO,CAACH,OAAD,CAAP;AACD,OAHD;AAID,KALM,CAAP;AAMD,GAPD;AAQD","sourcesContent":["module.exports = { rateLimiter };\n\nconst RateLimiter = require('limiter').RateLimiter;\n\nfunction rateLimiter (instance, requestsPerSecond) {\n  instance.limiter = new RateLimiter(requestsPerSecond, 'second');\n\n  instance.interceptors.request.use(function (request) {\n    return new Promise((resolve, reject) => {\n      instance.limiter.removeTokens(1, function (err, remainingRequests) {\n        if (err) return reject(err);\n        resolve(request);\n      });\n    });\n  });\n}\n"]},"metadata":{},"sourceType":"script"}