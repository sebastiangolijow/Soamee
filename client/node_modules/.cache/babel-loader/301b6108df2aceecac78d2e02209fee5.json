{"ast":null,"code":"module.exports = productsEndpoint;\n\nfunction productsEndpoint(opts) {\n  return {\n    products,\n    productsAsStream\n  };\n\n  function products(search, params, callback) {\n    if (typeof params === 'function' && !callback) {\n      callback = params;\n      params = {};\n    }\n\n    if (typeof params === 'function') {\n      var queryObjFuncErr = new Error('Unhandled parameter type');\n      callback(queryObjFuncErr);\n      return Promise.reject(queryObjFuncErr);\n    }\n\n    return opts.apiService(prepareRequest(search, params), callback);\n  }\n\n  function productsAsStream(search, params) {\n    return opts.apiStreamService('products.*', prepareRequest(search, params));\n  }\n\n  function prepareRequest(search, params) {\n    var bbyQuery = search && search.length > 0 ? `(${search})` : '';\n\n    if (!isNaN(search) && typeof search === 'number') {\n      // Resource ID\n      var ext = params && params.format === 'xml' ? 'xml' : 'json';\n      bbyQuery = `/${search}.${ext}`;\n    }\n\n    var url = `${opts.url}/v1/products${bbyQuery}`;\n    return {\n      url,\n      params\n    };\n  }\n}","map":{"version":3,"sources":["C:/Users/sebas/Desktop/folders/Jobs/Elaastacloud/client/node_modules/bestbuy/lib/products.js"],"names":["module","exports","productsEndpoint","opts","products","productsAsStream","search","params","callback","queryObjFuncErr","Error","Promise","reject","apiService","prepareRequest","apiStreamService","bbyQuery","length","isNaN","ext","format","url"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiBC,gBAAjB;;AAEA,SAASA,gBAAT,CAA2BC,IAA3B,EAAiC;AAC/B,SAAO;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAP;;AAEA,WAASD,QAAT,CAAmBE,MAAnB,EAA2BC,MAA3B,EAAmCC,QAAnC,EAA6C;AAC3C,QAAI,OAAOD,MAAP,KAAkB,UAAlB,IAAgC,CAACC,QAArC,EAA+C;AAC7CA,MAAAA,QAAQ,GAAGD,MAAX;AACAA,MAAAA,MAAM,GAAG,EAAT;AACD;;AAED,QAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AAChC,UAAIE,eAAe,GAAG,IAAIC,KAAJ,CAAU,0BAAV,CAAtB;AACAF,MAAAA,QAAQ,CAACC,eAAD,CAAR;AACA,aAAOE,OAAO,CAACC,MAAR,CAAeH,eAAf,CAAP;AACD;;AAED,WAAON,IAAI,CAACU,UAAL,CAAgBC,cAAc,CAACR,MAAD,EAASC,MAAT,CAA9B,EAAgDC,QAAhD,CAAP;AACD;;AAED,WAASH,gBAAT,CAA2BC,MAA3B,EAAmCC,MAAnC,EAA2C;AACzC,WAAOJ,IAAI,CAACY,gBAAL,CAAsB,YAAtB,EAAoCD,cAAc,CAACR,MAAD,EAASC,MAAT,CAAlD,CAAP;AACD;;AAED,WAASO,cAAT,CAAyBR,MAAzB,EAAiCC,MAAjC,EAAyC;AACvC,QAAIS,QAAQ,GAAIV,MAAM,IAAIA,MAAM,CAACW,MAAP,GAAgB,CAA3B,GAAiC,IAAGX,MAAO,GAA3C,GAAgD,EAA/D;;AAEA,QAAI,CAACY,KAAK,CAACZ,MAAD,CAAN,IAAkB,OAAOA,MAAP,KAAkB,QAAxC,EAAkD;AAChD;AACA,UAAIa,GAAG,GAAIZ,MAAM,IAAIA,MAAM,CAACa,MAAP,KAAkB,KAA7B,GAAsC,KAAtC,GAA8C,MAAxD;AACAJ,MAAAA,QAAQ,GAAI,IAAGV,MAAO,IAAGa,GAAI,EAA7B;AACD;;AACD,QAAIE,GAAG,GAAI,GAAElB,IAAI,CAACkB,GAAI,eAAcL,QAAS,EAA7C;AAEA,WAAO;AAAEK,MAAAA,GAAF;AAAOd,MAAAA;AAAP,KAAP;AACD;AACF","sourcesContent":["module.exports = productsEndpoint;\n\nfunction productsEndpoint (opts) {\n  return { products, productsAsStream };\n\n  function products (search, params, callback) {\n    if (typeof params === 'function' && !callback) {\n      callback = params;\n      params = {};\n    }\n\n    if (typeof params === 'function') {\n      var queryObjFuncErr = new Error('Unhandled parameter type');\n      callback(queryObjFuncErr);\n      return Promise.reject(queryObjFuncErr);\n    }\n\n    return opts.apiService(prepareRequest(search, params), callback);\n  }\n\n  function productsAsStream (search, params) {\n    return opts.apiStreamService('products.*', prepareRequest(search, params));\n  }\n\n  function prepareRequest (search, params) {\n    var bbyQuery = (search && search.length > 0) ? `(${search})` : '';\n\n    if (!isNaN(search) && typeof search === 'number') {\n      // Resource ID\n      var ext = (params && params.format === 'xml') ? 'xml' : 'json';\n      bbyQuery = `/${search}.${ext}`;\n    }\n    var url = `${opts.url}/v1/products${bbyQuery}`;\n\n    return { url, params };\n  }\n}\n"]},"metadata":{},"sourceType":"script"}